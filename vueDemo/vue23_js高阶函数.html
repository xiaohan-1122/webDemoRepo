<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>高阶函数</title>
<!--  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>-->

</head>
<body>
<script>
  /*
  * forEach()
  * 接受另一个函数作为参数。它用于以一种简单的方式循环遍历数组项。它可以接受三个类型的参数（元素，值和索引）。
  * */

  var arr = [1, 2, 3, 4, 5];
  // Using ES5.
  arr.forEach(function(item){
    if(item > 3){
      console.log(item); // Returns 4 and 5.
    }
  });
  // Using ES6.
  arr.forEach(item =>{
    if(item > 3){
      console.log(item); // Returns 4 and 5.
    }
  });
  // -----------------------------------------------------------------------------------------------------------------

  /*
  * Map()
  * 返回一个数组，该数组的长度与调用该数组的长度相同。只要它的回调函数没有改变，它也不会改变原始数组。它也可以采用三个类型参数（元素，值和索引）。
  * */
  const users = [
    { name: 'John', age: 34 },
    { name: 'Amy', age: 20 },
    { name: 'camperCat', age: 10 }
  ];

  const names = users.map(user => user.name);
  console.log(names); //Returns: [ 'John', 'Amy', 'camperCat' ]
  const new_ages = users.map(user => {
    if (user.age < 20){
      return user.age * 2;
    }
    return user.age;
  })
  console.log(new_ages);  //Returns: [34, 20, 20]
  // -----------------------------------------------------------------------------------------------------------------

  /*
  * filter()
  * 在数组的每个元素上调用一个函数，并返回一个仅包含该函数返回的元素的新数组true。换句话说，它根据传递给它的函数过滤数组。
  * 就像map方法一样，但是它不需要修改原始数组就可以完成工作。
  * 可以接受三个参数：
  *   第一个参数：当前正在处理的元素；
  *   第二个参数：该元素的索引；
  *   第三个参数：在其上filter调用该方法的数组
  * filter中的回调函数必须返回一个布尔值
  *   true:函数内部会自动将这次回调的item加入到新的数组中
  *   false：函数内部会过滤掉这次的item
  * */

  const array = [1, 2, 3, 4, 5];
  // Using ES5 syntax.
  var filtered1 = array.filter(function(item){
    return item < 3;
  });
  console.log(filtered1); // Returns: [1, 2]
  // Using ES6 syntax.
  const filtered2 = array.filter(item => item < 3);
  console.log(filtered1); // Returns: [1, 2]
  // -----------------------------------------------------------------------------------------------------------------

  /*
  * reduce()
  * 允许使用更通用的数组处理形式，并且filter与map可以作为特殊应用派生出reduce。
  * 它遍历数组中的每个项目并返回一个值。这是通过将其作为参数回调来实现的。
  * 该函数reduce有两个位置参数，第一个是累加器，另一个是迭代值，它返回累加值。
  * */
  const users1 = [
    { name: 'John', age: 34 },
    { name: 'Amy', age: 20 },
    { name: 'camperCat', age: 10 }
  ];

  const sumOfAges = users1.reduce((sum, user) => sum + user.age, 0);
  console.log(sumOfAges); //Returns: 64.

  const sumAges = users1.reduce((sum, user) => {
    return sum + user.age;
  }, 0);
  console.log(sumAges); //Returns: 64.
  // -----------------------------------------------------------------------------------------------------------------


  /*
  * sort()
  * 对数组的项目进行排序。排序顺序可以是字母或数字，也可以是升序或降序。
  * */
  // 以升序对数组中的数字进行排序：
  // Using ES5
  var points = [40, 100, 1, 5, 25, 10];
    points.sort(function(a, b){
      return a-b;
    }) // [1,5,10,25,40,100].
  // 以降序对数组中的数字进行排序：
  // Using ES6
  const points1 = [40, 100, 1, 5, 25, 10];
  points1.sort((a,b)=> b - a); // [100,40,25,10,5,1].
  // -----------------------------------------------------------------------------------------------------------------


  /*
  * every()
  * 检查数组中的每个元素是否通过特定测试。它返回一个布尔值（true / false）。
  * */
  //检查数组中的每个元素numbers是否小于10。
  let numbers = [1, 5, 8, 0, 10, 11];
  numbers.every(function(currentValue) {
    return currentValue < 10;
  });
  console.log(res);
  // Returns false
  // -----------------------------------------------------------------------------------------------------------------

  /*
  * some()
  * 有点类似于该方法every()，它检查数组中的任何元素是否通过特定测试。它还返回一个布尔值（true / false）。
  * */
  //检查数组中的任何元素numbers是否小于10。
  var numbers = [10, 50, 8, 220, 110, 11];
  numbers.some(function(currentValue) {
    return currentValue < 10;
  });
  // Returns true
</script>
</body>
</html>